"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleBuildMode=void 0;var _module_mode=require("./module_mode"),_ark_utils=require("../../../ark_utils"),_generate_sourcemap=require("../generate_sourcemap");class ModuleBuildMode extends _module_mode.ModuleMode{constructor(e){super(e)}generateAbc(e,o){this.prepareForCompilation(e,o),_generate_sourcemap.SourceMapGenerator.getInstance().buildModuleSourceMapInfo(o),this.executeArkCompiler(o)}executeArkCompiler(e){(0,_ark_utils.isEs2Abc)(this.projectConfig)?(this.generateEs2AbcCmd(),this.addCacheFileArgs(),this.genDescriptionsForMergedEs2abc(!!this.projectConfig.byteCodeHarInfo),this.generateMergedAbcOfEs2Abc(e)):(0,_ark_utils.isTs2Abc)(this.projectConfig)?(this.filterModulesByHashJson(),e=this.getSplittedModulesByNumber(),this.invokeTs2AbcWorkersToGenProto(e),this.processTs2abcWorkersToGenAbc()):this.throwArkTsCompilerError("ArkTS:INTERNAL ERROR: Invalid compilation mode.")}}exports.ModuleBuildMode=ModuleBuildMode;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkIfJsImportingArkts=checkIfJsImportingArkts;var _module_source_file=require("./module/module_source_file"),_utils=require("./utils"),_utils2=require("../../utils"),_ets_checker=require("../../ets_checker"),_ark_define=require("./common/ark_define");function _newArrowCheck(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")}function checkIfJsImportingArkts(r,e){var i=this;r.share.projectConfig.singleFileEmit&&e?checkAndLogArkTsFileImports(r,e):_module_source_file.ModuleSourceFile.getSourceFiles().forEach(function(e){_newArrowCheck(this,i),checkAndLogArkTsFileImports(r,e)}.bind(this))}function checkAndLogArkTsFileImports(i,e){var o=this;const t=e.getModuleId();var e=(0,_utils2.toUnixPath)(t);(0,_utils.isJsSourceFile)(t)&&-1===e.indexOf("/oh_modules/")&&(e=i.getModuleInfo(t).importedIdMaps,Object.values(e).forEach(function(e){var r;_newArrowCheck(this,o),(e.endsWith(_ark_define.EXTNAME_ETS)||e.endsWith(_ark_define.EXTNAME_D_ETS))&&(e=_ets_checker.compilerOptions.isCompatibleVersion?`ArkTS:WARN File: ${t}
`+`Importing ArkTS files in JS and TS files is about to be forbidden.
`:`ArkTS:ERROR ArkTS:ERROR File: ${t}
`+`Importing ArkTS files in JS and TS files is forbidden.
`,r=i.share.getLogger(_ark_define.GEN_ABC_PLUGIN_NAME),_ets_checker.compilerOptions.isCompatibleVersion?r.warn(_ark_define.yellow+e):r.error(_ark_define.red+e))}.bind(this)))}
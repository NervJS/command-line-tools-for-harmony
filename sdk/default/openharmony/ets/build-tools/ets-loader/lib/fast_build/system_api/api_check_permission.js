"use strict";function _newArrowCheck(e,i){if(e!==i)throw new TypeError("Cannot instantiate an arrow function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsDocCheckService=void 0;var PermissionVaildTokenState=function(e){return e[e.Init=0]="Init",e[e.LeftParenthesis=1]="LeftParenthesis",e[e.RightParenthesis=2]="RightParenthesis",e[e.PermissionChar=3]="PermissionChar",e[e.And=4]="And",e[e.Or=5]="Or",e}(PermissionVaildTokenState||{});class JsDocCheckService{static validPermission(e,i){var r=this,e=JsDocCheckService.getSplitsArrayWithDesignatedCharAndStr(e??""," ").filter(function(e){return _newArrowCheck(this,r),""!==e}.bind(this));const s=[];e.forEach(function(e){_newArrowCheck(this,r);e=JsDocCheckService.getSplitsArrayWithDesignatedCharAndArrayStr([e],"("),e=JsDocCheckService.getSplitsArrayWithDesignatedCharAndArrayStr(e,")");s.push(...e)}.bind(this));e={valid:!1,currentToken:PermissionVaildTokenState.Init,finish:!1,currentPermissionMatch:!0};return JsDocCheckService.validPermissionRecursion(s,i,e),e.valid}static validPermissionRecursion(e,i,r){var s,t=this;e.some(function(e){return _newArrowCheck(this,t),["(",")"].includes(e)}.bind(this))?(s=JsDocCheckService.groupWithParenthesis(e),s=JsDocCheckService.getGroupItemPermission(s,r,i),JsDocCheckService.getPermissionVaildAtoms(s,r,i??[])):JsDocCheckService.getPermissionVaildAtoms(e,r,i??[])}static getSplitsArrayWithDesignatedCharAndStr(e,i){var r=this;return e.split(i).map(function(e){return _newArrowCheck(this,r),e.trim()}.bind(this))}static getGroupItemPermission(e,s,t){var n=this;const c=[];return e.forEach(function(e){var i,r;_newArrowCheck(this,n),e.includeParenthesis?(i={...s},r=e.subQueue.slice(1,e.subQueue.length-1),JsDocCheckService.validPermissionRecursion(r,t,i),i.valid?c.push(""):c.push("NA")):c.push(...e.subQueue)}.bind(this)),c}static groupWithParenthesis(r){var s=this;let t=0;const n=[];let c={subQueue:[],includeParenthesis:!1};return r.forEach(function(e,i){_newArrowCheck(this,s),"("===e?(0===t?(n.push(c),c={subQueue:[e],includeParenthesis:!0}):c.subQueue.push(e),t++):")"===e?(t--,c.subQueue.push(e),0===t&&(n.push(c),c={subQueue:[],includeParenthesis:!1})):(c.subQueue.push(e),i===r.length-1&&n.push(c))}.bind(this)),n}static getPermissionVaildAtoms(e,i,r){i.finish||("and"===e[0]?i.currentToken=PermissionVaildTokenState.And:"or"===e[0]?i.currentToken=PermissionVaildTokenState.Or:i.currentToken===PermissionVaildTokenState.Or?JsDocCheckService.inValidOrExpression(e,i,r)&&(i.currentPermissionMatch=!1):i.currentToken===PermissionVaildTokenState.And?JsDocCheckService.inValidAndExpression(e,i,r)&&(i.currentPermissionMatch=!1):i.currentPermissionMatch=JsDocCheckService.validPermissionItem(e[0],r),1<e.length?JsDocCheckService.getPermissionVaildAtoms(e.slice(1),i,r):(i.valid=i.currentPermissionMatch,i.finish=!0))}static inValidOrExpression(e,i,r){return i.currentPermissionMatch||JsDocCheckService.validPermissionItem(e[0],r)?!(i.currentPermissionMatch=!0):!(i.valid=!1)}static inValidAndExpression(e,i,r){return i.currentPermissionMatch&&JsDocCheckService.validPermissionItem(e[0],r)?(i.currentPermissionMatch=JsDocCheckService.validPermissionItem(e[0],r),!1):!(i.valid=!1)}static validPermissionItem(e,i){return""===e||i.includes(e)}static getSplitsArrayWithDesignatedCharAndArrayStr(e,r){var s=this;const t=[];return e.forEach(function(e){var i=this;_newArrowCheck(this,s),e.includes(r)?JsDocCheckService.getSplitsArrayWithDesignatedCharAndStr(e,r).forEach(function(e){_newArrowCheck(this,i),""===e?t.push(r):t.push(e)}.bind(this)):t.push(e)}.bind(this)),t}}exports.JsDocCheckService=JsDocCheckService;
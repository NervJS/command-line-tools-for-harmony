"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExternalParameter=void 0;const wdk_1=require("@baize/wdk"),json_schema_util_js_1=require("@ohos/hvigor-common/src/util/json-schema-util.js"),hvigor_logger_1=require("@ohos/hvigor-logger"),fs_extra_1=require("fs-extra"),path_const_js_1=require("../../common/const/path-const.js"),global_core_parameters_js_1=require("../internal/data/global-core-parameters.js"),hvigor_log_js_1=require("../log/hvigor-log.js"),object_util_js_1=require("../util/object-util.js");class ExternalParameter{constructor(){this.logger=hvigor_log_js_1.HvigorLogger.getLogger(ExternalParameter.name)}getExtParam(e){var r;return null===(r=this.getExtParams())||void 0===r?void 0:r[e]}getExtParams(){return(0,object_util_js_1.freezeDeep)((0,wdk_1.cloneDeep)(global_core_parameters_js_1.coreParameter.extParams))}getProperties(){return(0,object_util_js_1.freezeDeep)((0,wdk_1.cloneDeep)(global_core_parameters_js_1.coreParameter.properties))}getProperty(e){var r;return null===(r=this.getProperties())||void 0===r?void 0:r[e]}setProperty(e,r){this.propertiesSchema||(this.propertiesSchema=(0,fs_extra_1.readJsonSync)(path_const_js_1.HVIGOR_CONFIG_SCHEMA_PATH).properties.properties);const a=`${path_const_js_1.HVIGOR_CONFIG_SCHEMA_PATH}.properties.properties`,{isValid:t,errMsg:o}=(0,json_schema_util_js_1.validateDataBySchema)({[e]:r},a,this.propertiesSchema);t||this.logger.printErrorExitWithoutStack(new hvigor_logger_1.HvigorErrorAdaptor("METHID_SETPROPERTY_VALIDATE_FAILED_IN_HVIGORFILE").formatSolutions(0,o).getErrorMessage()),global_core_parameters_js_1.coreParameter.properties[e]=r}getStartParams(){return(0,object_util_js_1.freezeDeep)((0,wdk_1.cloneDeep)({daemon:global_core_parameters_js_1.coreParameter.startParams.daemon,analyze:global_core_parameters_js_1.AnalyzeModeKeyMap.get(global_core_parameters_js_1.coreParameter.startParams.analyze),parallel:global_core_parameters_js_1.coreParameter.startParams.parallelExecution,incremental:global_core_parameters_js_1.coreParameter.startParams.incrementalExecution,logLevel:global_core_parameters_js_1.coreParameter.startParams.logLevel.levelStr.toLowerCase(),typeCheck:global_core_parameters_js_1.coreParameter.startParams.hvigorfileTypeCheck}))}getWorkspaceDir(){return(0,object_util_js_1.freezeDeep)((0,wdk_1.cloneDeep)(global_core_parameters_js_1.coreParameter.workspaceDir))}}exports.ExternalParameter=ExternalParameter;
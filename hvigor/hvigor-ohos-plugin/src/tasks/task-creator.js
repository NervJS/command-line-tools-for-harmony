"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TaskCreatorManager=exports.TargetTaskCreator=exports.GlobalTaskCreator=exports.DefaultTaskCreator=void 0;const creation_util_js_1=require("./manager/creation-util.js");class DefaultTaskCreator{}exports.DefaultTaskCreator=DefaultTaskCreator;class GlobalTaskCreator extends DefaultTaskCreator{constructor(e,t,s){super(),this.isFa=!1,this.depends=[],this.dependsDefinedByUser=[],this.details={name:"UninitializedTask"},this.configure=()=>{this.details=this.declareTaskDetail()},this.afterConfigure=()=>{this.depends=(0,creation_util_js_1.computeHookTaskDepends)(this.declareDepends(),this.plugin.getNeedExecTargetServiceList())},this.finalConfigured=()=>{this.dependsDefinedByUser.forEach((e=>{this.depends.push(e)}))},this.service=e,this.plugin=t,this.isFa=void 0===s?this.isFa:s}}exports.GlobalTaskCreator=GlobalTaskCreator;class TargetTaskCreator extends DefaultTaskCreator{constructor(e,t){super(),this.isFa=!1,this.depends=[],this.dependsDefinedByUser=[],this.details={name:""},this.configure=()=>{this.details=(0,creation_util_js_1.computeTaskDetailsWithTarget)(this.declareTaskDetail(),this.targetService)},this.afterConfigure=()=>{this.depends=(0,creation_util_js_1.computeDepends)(this.declareDepends(),this.targetService)},this.finalConfigured=()=>{this.dependsDefinedByUser.forEach((e=>{this.depends.push(e)}))},this.targetService=e,this.node=this.targetService.getModuleService().getNode(),this.isFa=void 0===t?this.isFa:t}}exports.TargetTaskCreator=TargetTaskCreator;class TaskCreatorManager{getTaskContainer(){return this._taskContainer}constructor(e){this._creators=[],this._taskContainer=e}registry(e){e.configure(),this._creators.push(e),this._taskContainer.registerTask(e)}configure(){this._creators.forEach((e=>{e.afterConfigure(),e.finalConfigured()}))}}exports.TaskCreatorManager=TaskCreatorManager;
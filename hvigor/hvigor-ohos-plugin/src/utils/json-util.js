"use strict";var __importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeStringJson=exports.getJson5Obj=void 0;const hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),os_1=__importDefault(require("os")),path_1=__importDefault(require("path")),error_code_map_js_1=require("../error/error-code-map.js"),ohos_logger_js_1=require("./log/ohos-logger.js"),log=ohos_logger_js_1.OhosLogger.getLogger("json-util");function getJson5Obj(r,e="utf-8"){if(!fs_extra_1.default.existsSync(r))return;const o=fs_extra_1.default.readFileSync(path_1.default.resolve(r),{encoding:e});try{return(0,hvigor_1.parseJsonText)(o)}catch(e){if(e instanceof SyntaxError){const o=e.message.split("at ");2===o.length&&log._errorCode(error_code_map_js_1.ECM.DECE.COMMON_UTILS).errorMessageExit(`${o[0].trim()}${os_1.default.EOL}\t at ${r}:${o[1].trim()}`)}log._errorCode(error_code_map_js_1.ECM.DECE.COMMON_UTILS).errorMessageExit(`${r} is not the correct JSON/JSON5 format.`)}}function mergeStringJson(r,e){const o={string:[]},t=[];return null==r||r.string.forEach((r=>{o.string.push(r),t.push(r.name)})),null==e||e.string.forEach((r=>{t.includes(r.name)||o.string.push(r)})),o}exports.getJson5Obj=getJson5Obj,exports.mergeStringJson=mergeStringJson;
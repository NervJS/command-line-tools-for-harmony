"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkDuplicatedFileNamesPlugin=void 0;const path_1=__importDefault(require("path")),hvigor_arkts_base_1=require("@ohos/hvigor-arkts-base"),fileNamesMap=new Map,duplicatedFileNamesSet=new Set,LOGGER=hvigor_arkts_base_1.ArktsBaseLogger.getPluginLogger("Duplicated filenames check");function checkDuplicatedFileNamesPlugin(){return{name:"checkDuplicatedFileNamesPlugin",load:load,beforeBuildEnd:beforeBuildEnd,cleanUp(){fileNamesMap.clear(),duplicatedFileNamesSet.clear()}}}function load(e){const a=path_1.default.extname(e),i=e.slice(0,-a.length);fileNamesMap.has(i)?(duplicatedFileNamesSet.add(fileNamesMap.get(i)),duplicatedFileNamesSet.add(e)):fileNamesMap.set(i,e)}function beforeBuildEnd(){duplicatedFileNamesSet.size>0&&LOGGER.warn(`Duplicate file names detected, which may cause compilation errors. Please check the following files: \n${[...duplicatedFileNamesSet].join("\n")}`),fileNamesMap.clear(),duplicatedFileNamesSet.clear()}exports.checkDuplicatedFileNamesPlugin=checkDuplicatedFileNamesPlugin;
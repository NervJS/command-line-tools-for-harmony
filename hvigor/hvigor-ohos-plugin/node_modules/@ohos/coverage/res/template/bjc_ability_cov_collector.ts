class EntryAbility extends UIAbility {
  onDestroy(): void {
    this.__BJC_COV_CollectData();
  }
  onDump(params: Array<string>): Array<string> {
    this.__BJC_COV_CollectData();
    return params;
  }
  private __BJC_COV_CollectData() {
    let covFile = this.context.cacheDir + `/bjc_cov_${new Date().getTime()}.json`;
    let file = bjc_fs.openSync(covFile, bjc_fs.OpenMode.READ_WRITE | bjc_fs.OpenMode.CREATE);
    if (globalThis['__coverage__']) {
      bjc_fs.writeSync(file.fd, JSON.stringify(globalThis['__coverage__']));
    }
    bjc_fs.closeSync(file);
  }
}

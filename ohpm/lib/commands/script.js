"use strict";var t=this&&this.__awaiter||function(t,r,e,i){return new(e||(e=Promise))((function(n,o){function c(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(c,s)}u((i=i.apply(t,r||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.scriptCmd=void 0;const r=require("../util"),e=require("../common/message"),i=require("../core/scripts/script"),n=require("../core/scripts/ScriptRunner"),o=require("../config"),c=require("../core/install/common/OptionValid");exports.scriptCmd=function(s,u,p){return t(this,void 0,void 0,(function*(){const t=(new Date).getTime();let a=!0;try{(0,c.validPrefixOptions)("script",p);const f=yield(0,i.script)(s,u,o.config.getRootDir());(0,r.output)(""),f?r.PrintUtil.printCostTime(t,"> Run script"):(n.ScriptRunner.errOut(s,e.Messages.Script.Fail,o.config.getRootDir()),a=!1)}catch(t){n.ScriptRunner.errOut(s,t,o.config.getRootDir()),a=!1}if(!a)throw new Error(e.Messages.Script.Fail)}))};
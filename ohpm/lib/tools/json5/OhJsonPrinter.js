"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OhJsonPrinter=void 0;const t=require("../../util"),i=require("../../util/FsUtil");exports.OhJsonPrinter=class{constructor(t){this.indent=" ",this.indent="number"==typeof t?" ".repeat(t):t||""}print(t){null!==t?"object"==typeof t?(this.realPrint(this.isArray(t)?"[":"{"),this.printRecursion(t,1),this.realPrint(this.isArray(t)?"]":"}")):this.realPrint(`${JSON.stringify(t)}`):this.realPrint("null")}printRecursion(t,i){this.isArray(t)?this.printArray(t,i):this.printObject(t,i)}printObject(t,r=0){if(0===Object.entries(t).length)return;const e=this.getIndent(r),n=Object.keys(t);let s=n.length-1;n.forEach(((h,l)=>{if(void 0===t[h]||"undefined"===t[h])return void s--;const o=t[h],c=this.isObject(o),a=this.isArray(o),u=l===s||l===n.length-1?"":",",p=c?`${a?"[":"{"}`:`"${i.FsUtil.slash(String(o))}"${u}`;if(this.realPrint(`${e}"${h}": ${p}`),c||a){this.printRecursion(o,r+1);const t=a?"]":"}";this.realPrint(`${e}${t}${u}`)}}))}printArray(t,r=0){if(0===t.length)return;const e=this.getIndent(r);t.forEach(((n,s)=>{const h=this.isObject(n),l=this.isArray(n),o=s===t.length-1?"":",",c=h?`${l?"[":"{"}`:`"${i.FsUtil.slash(String(n))}"${o}`;if(this.realPrint(`${e}${c}`),h||l){this.printRecursion(n,r+1);const t=l?"]":"}";this.realPrint(`${e}${t}${o}`)}}))}isObject(t){return t&&"object"==typeof t}isArray(t){return this.isObject(t)&&Array.isArray(t)}getIndent(t){return t?this.indent.repeat(t):""}realPrint(i){t.PrintUtil.print(i)}};
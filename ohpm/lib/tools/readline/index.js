"use strict";var t=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{d(i.next(t))}catch(t){o(t)}}function u(t){try{d(i.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}d((i=i.apply(t,e||[])).next())}))},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.questionHideable=exports.manualExit=void 0;const n=require("os"),i=require("process"),r=e(require("readline")),o=require("stream");class s extends o.Writable{constructor(t){super(t),this.hidden=!1}}const u=new s({write:function(t,e,n){this.hidden?process.stdout.write(Buffer.from("*"),e):process.stdout.write(t,e),n()}});exports.manualExit=Symbol("Interrupted manually."),exports.questionHideable=function(e){return t(this,void 0,void 0,(function*(){return new Promise((t=>{const o=r.default.createInterface({input:i.stdin,output:u});let s="";const d=e=>{const i=e.toString();""===i?(u.hidden=!1,u.write(Buffer.from(n.EOL)),t(exports.manualExit)):i&&!/\p{Cc}/gu.test(i)&&(s+=i,u.write(e))};i.stdin.setRawMode(!0),i.stdin.on("data",d),u.hidden=!1,o.question(e,(()=>{i.stdin.off("data",d),i.stdin.setRawMode(!1),i.stdin.pause(),u.hidden=!1,u.write(Buffer.from(n.EOL)),o.close(),t(s)})),u.hidden=!0}))}))};
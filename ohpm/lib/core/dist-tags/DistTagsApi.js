"use strict";var t=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function u(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,u)}c((n=n.apply(t,e||[])).next())}))},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DistTagsApi=void 0;const i=e(require("node-fetch")),n=require("../registry"),r=require("../registry/registry"),s=require("../registry/OhpmRequestInit");exports.DistTagsApi=class{constructor(t){this.publishRegistry=t}getRequestUrl(t,e){const i=(0,r.formatRegistry)(this.publishRegistry);return t=encodeURIComponent(t),e=encodeURIComponent(e),i.concat(`-/package/${t}/dist-tags/${e}`)}fetchDistTagsRequest(e,r,o,u,c){return t(this,void 0,void 0,(function*(){const t=new s.OhpmRequestInit;t.withHeaders({command:o,version:"v1","user-agent":(0,n.getUserAgent)(),authorization:r,"Content-Type":"application/json; charset=UTF-8"}).withTimeout((0,n.getFetchTimeout)()).withAgent((0,n.getProxyAgent)(this.publishRegistry)).withMethod(u),c&&t.withBody(JSON.stringify({version:c}));const a=yield(0,i.default)(e,t);a.ok||(yield(0,n.handleResponseError)(a,o))}))}};
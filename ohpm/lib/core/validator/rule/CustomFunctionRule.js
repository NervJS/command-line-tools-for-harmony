"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomFunctionRule=void 0;const e=require("./types"),r=t(require("../../../log"));exports.CustomFunctionRule=class{constructor(t,e){this.customValidateFuncArray=t,this.errorCallback=e}validate(t,a,s){s=s||a,r.default.debug("",`start CustomFunctionRule.validate attribute "${s}" in publishJson.`);for(let u=0;u<this.customValidateFuncArray.length;u++){const i=this.customValidateFuncArray[u];if(i)try{t[a]&&i(t[a])}catch(t){this.errorMsg=t.message,this.errorCallback(s,{attrName:s,ruleType:e.ValidationRuleType.CustomFunction,errorMsg:this.getErrorMsg(s)})}else r.default.warn("",`attribute "${s}"  in "oh-package.json5" undefined validate method.`)}r.default.debug("",`CustomFunctionRule.validate attribute "${s}" in publishJson succeed..`)}getErrorMsg(t){return`attribute "${t}" in "oh-package.json5" validate fail, ${this.errorMsg}`}};
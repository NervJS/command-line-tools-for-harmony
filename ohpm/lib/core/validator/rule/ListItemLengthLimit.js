"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListItemLengthLimitRule=void 0;const e=require("./types"),i=t(require("../../../log")),r=require("../../../common/message");exports.ListItemLengthLimitRule=class{constructor(t,e,i){this.maxLength=t,this.minLength=e,this.errorCallback=i}validate(t,r,n){n=n||r,i.default.debug("",`start ItemLengthLimitRule.validate attribute "${n}" in publishJson.`);const a=t[r];a&&(Array.isArray(a)?(a.forEach((t=>{(this.maxLength>0&&t.length>this.maxLength||this.minLength>0&&(!t||t.length<this.minLength))&&this.errorCallback(n,{attrName:n,ruleType:e.ValidationRuleType.ListItemLengthLimit,errorMsg:this.getErrorMsg(n||"")})})),i.default.debug("",`ItemLengthLimitRule.validate attribute "${n}" in publishJson succeed..`)):this.errorCallback(n,{attrName:n,ruleType:e.ValidationRuleType.ListItemLengthLimit,errorMsg:`attribute "${n}" is not an array`}))}getErrorMsg(t){if(this.maxLength>0&&this.minLength>0)return`the length of each item of the attribute "${t}" in "oh-package.json5" must range [${this.minLength}, ${this.maxLength}]`;if(this.maxLength>0)return`the length of each item of the attribute "${t}" in "oh-package.json5" must range (0, ${this.maxLength}]`;if(this.minLength>0)return`the length of each item of the attribute "${t}" in "oh-package.json5" must range [${this.minLength}, Infinity)`;throw i.default.error("",`both "maxLen": ${this.maxLength} and \n      "minLen": ${this.minLength} in the ItemLengthLimitRule are less than 0.`),new Error(r.Messages.Validator.UnknownError)}};
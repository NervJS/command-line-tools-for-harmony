"use strict";var t=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(r,i){function o(t){try{c(n.next(t))}catch(t){i(t)}}function u(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,u)}c((n=n.apply(t,e||[])).next())}))},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.genPublicationFormData=exports.publicationStream=void 0;const a=e(require("form-data")),n=e(require("fs")),r=e(require("../../../../log"));exports.genPublicationFormData=function(e){return t(this,void 0,void 0,(function*(){delete e._attachments;const t=new a.default;return r.default.debug("genPublicationFormData:","upload metadata"),t.append("metadata",JSON.stringify(e)),r.default.debug("genPublicationFormData:","upload file stream"),exports.publicationStream=n.default.createReadStream(e.pkg),t.append("pkg_stream",exports.publicationStream),t}))};
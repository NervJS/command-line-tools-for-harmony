"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{d(n.next(e))}catch(e){i(e)}}function s(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}d((n=n.apply(e,t||[])).next())}))},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.commandHandler=void 0;const r=t(require("semver")),n=require("../../common/Constants"),o=t(require("../../log")),i=require("../audit"),a=require("../override-dependency-map/OverrideDepMapManager"),s=require("./types");exports.commandHandler=function(t,d,...u){var l;return e(this,void 0,void 0,(function*(){const e=(new Date).getTime();try{r.default.lt(process.versions.node,n.Constants.RECOMMENDED_NODE_VERSION)&&o.default.warn("",'Your "NodeJs" version is less than the recommended version "18.x.x", please upgrade it as soon as possible.'),yield d(...u),yield(0,i.auditCmd)(t,e,!0)}catch(r){yield(0,i.auditCmd)(t,e,!1,""),o.default.error("",`${null!==(l=s.ErrLogPrefixMap.get(t))&&void 0!==l?l:""}${(null==r?void 0:r.message)||r}`),o.default.shutdown((()=>process.exit(1)))}finally{a.OverrideDepMapManager.destroy()}}))};
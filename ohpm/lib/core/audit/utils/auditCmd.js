"use strict";var t=this&&this.__awaiter||function(t,e,i,u){return new(i||(i=Promise))((function(r,o){function a(t){try{c(u.next(t))}catch(t){o(t)}}function n(t){try{c(u.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,n)}c((u=u.apply(t,e||[])).next())}))},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.auditCmd=void 0;const i=require("../TelemetryBuilderFactory"),u=require("../AuditorFactory"),r=e(require("../../../log")),o=require("./genAuditData"),a=require("../../../util");exports.auditCmd=function(e,n,c,d){return t(this,void 0,void 0,(function*(){try{const t=Date.now(),l=(0,o.genAuditData)(e,n,c,d),s=i.TelemetryBuilderFactory.create(e,l),f=u.AuditorFactory.getAuditor();yield f.audit(s),r.default.debug("",`audit successfully, cost: ${(0,a.calculateCostTime)(t)}`)}catch(t){r.default.debug("",`audit failed, detail: ${(null==t?void 0:t.message)||t}`)}}))};
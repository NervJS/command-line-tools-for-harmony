"use strict";var e=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OhPkgParameterizationParser=void 0;const a=require("./index"),r=require("../../util"),n=t(require("../../log")),i=require("../../common/Constants");class s extends a.BaseParameterizationParser{constructor(e){super(e)}parse(t){return e(this,void 0,void 0,(function*(){if(!(yield this.isParameter(t)))return t;this.parameterFile.isLoaded()||(yield this.parameterFile.loadParameterFile());const e=this.parameterizationCache.get(t.name);if(e&&"object"==typeof e)return n.default.debug("",`${t.name}'s ${i.Constants.MyPackageJson} has been parameterized and now returns the cached parameterized result.`),JSON.parse(JSON.stringify(e));const s=Date.now();for(const e of this.supportValues){const r=(0,a.getObjectValueByKey)(e,t);yield this.parseParameter(e,r,t)}return n.default.debug("",`${t.name}/${i.Constants.MyPackageJson}: ${JSON.stringify(t)}`),n.default.debug("",`parse ${t.name}/${i.Constants.MyPackageJson} completed in ${(0,r.calculateCostTime)(s)}`),this.parameterizationCache.set(t.name,JSON.parse(JSON.stringify(t))),t}))}}exports.OhPkgParameterizationParser=s;
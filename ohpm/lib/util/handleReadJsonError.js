"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleReadJsonError=void 0;const s=require("../common/Constants"),o=e(require("path")),t=require("../common/message"),r=require("./FsUtil");function n(e,s){if("ENOENT"===s.code)throw new Error((0,t.format)(t.Messages.Common.FileNotFound,{filename:e,filedir:o.default.dirname(s.path)}));throw new Error((0,t.format)(t.Messages.Common.FileReadError,{filename:e,filedir:o.default.dirname(s.path),detail:s.message}))}exports.handleReadJsonError=function(e,o){if(!e||"string"==typeof e)throw new Error(e);const t=e.message;if(t&&t.startsWith("JSON5:"))throw"string"==typeof o&&(o=r.FsUtil.slash(o)),new Error(`${t} in "${o}"`);if(!e.path)throw new Error(e.message);const a=e.path;if(a.includes(s.Constants.MyPackageJson)&&n(s.Constants.MyPackageJson,e),a.includes(s.Constants.PackageJson)&&n(s.Constants.PackageJson,e),a.includes(s.Constants.LockJson))n(s.Constants.LockJson,e);else{if(!a.includes(s.Constants.BuildProfile))throw new Error(e.message);n(s.Constants.BuildProfile,e)}};